<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Draws on functions from the cobalt package to quantify the relations between
exposure and confounders at each exposure time point according to the
guidelines from Jackson, 2016 on how to assess balance for time-varying
exposures."><title>Assesses confounder balancing — assessBalance • devMSMs</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Assesses confounder balancing — assessBalance"><meta property="og:description" content="Draws on functions from the cobalt package to quantify the relations between
exposure and confounders at each exposure time point according to the
guidelines from Jackson, 2016 on how to assess balance for time-varying
exposures."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">devMSMs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Terminology.html">Terminology</a>
    <a class="dropdown-item" href="../articles/Data_Requirements.html">Data Requirements</a>
    <a class="dropdown-item" href="../articles/Specify_Core_Inputs.html">Specify Core Inputs</a>
    <a class="dropdown-item" href="../articles/Preliminary_Steps.html">Recommended Preliminary Steps</a>
    <a class="dropdown-item" href="../articles/Workflow_Continuous_Exposure.html">Workflow: Continuous Exposure</a>
    <a class="dropdown-item" href="../articles/Customize_Balancing_Formulas.html">Customize Balancing Formulas</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/istallworthy/devMSMs/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Assesses confounder balancing</h1>
      <small class="dont-index">Source: <a href="https://github.com/istallworthy/devMSMs/blob/HEAD/R/assessBalance.R" class="external-link"><code>R/assessBalance.R</code></a></small>
      <div class="d-none name"><code>assessBalance.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Draws on functions from the cobalt package to quantify the relations between
exposure and confounders at each exposure time point according to the
guidelines from Jackson, 2016 on how to assess balance for time-varying
exposures.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">assessBalance</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">exposure</span>,</span>
<span>  <span class="va">exposure_time_pts</span>,</span>
<span>  <span class="va">outcome</span>,</span>
<span>  <span class="va">type</span>,</span>
<span>  <span class="va">formulas</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  balance_thresh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  imp_conf <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  home_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  save.out <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>data in wide format as: a data frame, list of imputed data
frames, or mids object</p></dd>


<dt>exposure</dt>
<dd><p>name of exposure variable</p></dd>


<dt>exposure_time_pts</dt>
<dd><p>list of integers at which weights will be
created/assessed that correspond to time points when exposure wass measured</p></dd>


<dt>outcome</dt>
<dd><p>name of outcome variable with ".timepoint" suffix</p></dd>


<dt>type</dt>
<dd><p>type of balance assessment; 'prebalance' or 'weighted'</p></dd>


<dt>formulas</dt>
<dd><p>list of balancing formulas at each time point output from
createFormulas()</p></dd>


<dt>weights</dt>
<dd><p>list of IPTW weights output from createWeights, required for
type 'weighted'</p></dd>


<dt>balance_thresh</dt>
<dd><p>(optional) one or two numbers between 0 and 1
indicating a single balancing threshold or thresholds for more and less
important confounders, respectively (default = 0.1)</p></dd>


<dt>imp_conf</dt>
<dd><p>(optional) list of variable names reflecting important
confounders, required if two balance thresholds are supplied</p></dd>


<dt>home_dir</dt>
<dd><p>(optional) path to home directory (required if save.out =
TRUE)</p></dd>


<dt>verbose</dt>
<dd><p>(optiona) TRUE or FALSE indicator for user output (default is
TRUE)</p></dd>


<dt>save.out</dt>
<dd><p>(optional) TRUE or FALSE indicator to save output and
intermediary output locally (default is TRUE)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a data frame of balance statistics</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>cobalt package,
<a href="https://cran.r-project.org/web/packages/cobalt/index.html" class="external-link">https://cran.r-project.org/web/packages/cobalt/index.html</a></p>
<p>Jackson, 2016 for more on assessing balance for time-varying
exposures, <a href="https://pubmed.ncbi.nlm.nih.gov/27479649/" class="external-link">https://pubmed.ncbi.nlm.nih.gov/27479649/</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span>,</span></span>
<span class="r-in"><span>                   A.1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   A.2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   A.3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   B.1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   B.2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   B.3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   C <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   D.3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">test</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">test</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span><span class="op">)</span><span class="op">]</span>, <span class="va">as.numeric</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="createFormulas.html">createFormulas</a></span><span class="op">(</span>exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                    exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                    tv_confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span>, <span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    ti_confounders <span class="op">=</span> <span class="st">"C"</span>,</span></span>
<span class="r-in"><span>                    type <span class="op">=</span> <span class="st">"short"</span>,</span></span>
<span class="r-in"><span>                    save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The short formula for A - D.3 at A time point 1 is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A.1 ~ C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x555b0fb97320&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The short formula for A - D.3 at A time point 2 is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A.2 ~ A.1 + B.1 + C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x555b0fb97320&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The short formula for A - D.3 at A time point 3 is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A.3 ~ A.2 + B.2 + C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x555b0fb97320&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Prebalance</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"prebalance"</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-1.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-2.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-3.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, 3 out of 7 (43%) covariates across time points, corresponding to 3 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.24 (range= 0.22-0.34):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using no weights and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          1|            0|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          1|            2|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          2|            1|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and no weights :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.09 (range = -0.08 -0.34). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, the following 3 covariates across time points out of 7 total (42.86%) spanning 3 domains out of 3 (100%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.24 (range=0.22-0.34) :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced Covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2  |A        |        2|          1|A.1       | 0.3392746|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |4  |A        |        2|          0|C         | 0.2424822|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |6  |A        |        3|          2|B.2       | 0.2172097|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"prebalance"</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   balance_thresh <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-4.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-5.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-6.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, 3 out of 7 (43%) covariates across time points, corresponding to 3 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.24 (range= 0.22-0.34):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using no weights and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          1|            0|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          1|            2|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          2|            1|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and no weights :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.09 (range = -0.08 -0.34). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, the following 3 covariates across time points out of 7 total (42.86%) spanning 3 domains out of 3 (100%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.24 (range=0.22-0.34) :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced Covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2  |A        |        2|          1|A.1       | 0.3392746|        0.2|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |4  |A        |        2|          0|C         | 0.2424822|        0.2|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |6  |A        |        3|          2|B.2       | 0.2172097|        0.2|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"prebalance"</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   balance_thresh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   imp_conf <span class="op">=</span> <span class="st">"B.1"</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-7.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-8.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-9.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, 3 out of 7 (43%) covariates across time points, corresponding to 3 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.24 (range= 0.22-0.34):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using no weights and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          1|            0|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          1|            2|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          2|            1|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and no weights :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.09 (range = -0.08 -0.34). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, the following 3 covariates across time points out of 7 total (42.86%) spanning 3 domains out of 3 (100%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.24 (range=0.22-0.34) :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced Covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2  |A        |        2|          1|A.1       | 0.3392746|        0.2|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |4  |A        |        2|          0|C         | 0.2424822|        0.2|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |6  |A        |        3|          2|B.2       | 0.2172097|        0.2|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="createFormulas.html">createFormulas</a></span><span class="op">(</span>exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                    exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                    tv_confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span>, <span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span>, <span class="st">"A.1:B.1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    ti_confounders <span class="op">=</span> <span class="st">"C"</span>,</span></span>
<span class="r-in"><span>                    type <span class="op">=</span> <span class="st">"short"</span>,</span></span>
<span class="r-in"><span>                    save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The short formula for A - D.3 at A time point 1 is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A.1 ~ C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x555b12565888&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The short formula for A - D.3 at A time point 2 is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A.2 ~ A.1 + A.1:B.1 + B.1 + C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x555b12565888&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The short formula for A - D.3 at A time point 3 is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A.3 ~ A.2 + B.2 + C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x555b12565888&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"prebalance"</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-10.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-11.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-12.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, 3 out of 8 (38%) covariates across time points, corresponding to 3 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.24 (range= 0.22-0.34):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using no weights and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          1|            0|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          2|            2|  4|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          2|            1|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and no weights :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.09 (range = -0.08 -0.34). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, the following 3 covariates across time points out of 8 total (37.5%) spanning 3 domains out of 3 (100%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.24 (range=0.22-0.34) :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced Covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2  |A        |        2|          1|A.1       | 0.3392746|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |5  |A        |        2|          0|C         | 0.2424822|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |7  |A        |        3|          2|B.2       | 0.2172097|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Weighted</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="createWeights.html">createWeights</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> For the cbps weighting method, the median weight value is 1.04 (SD = 0.79; range = 0.11-5). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-13.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"weighted"</span>,</span></span>
<span class="r-in"><span>                   weights <span class="op">=</span> <span class="va">w</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-14.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-15.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-16.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, 3 out of 8 (38%) covariates across time points, corresponding to 2 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.14 (range= -0.14-0.28):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using cbps and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          1|            0|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          2|            2|  4|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          2|            1|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and cbps :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.05 (range = -0.14 -0.28). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, the following 3 covariates across time points out of 8 total (37.5%) spanning 2 domains out of 3 (66.67%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.14 (range=-0.14-0.28) :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced Covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |exposure | exp_time| covar_time|covariate |    avg_bal| bal_thresh| balanced|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:--------|--------:|----------:|:---------|----------:|----------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2  |A        |        2|          1|A.1       |  0.2764999|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |5  |A        |        2|          0|C         | -0.1183379|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |6  |A        |        3|          2|A.2       | -0.1424247|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"weighted"</span>,</span></span>
<span class="r-in"><span>                   weights <span class="op">=</span> <span class="va">w</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   balance_thresh <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-17.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-18.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-19.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, 1 out of 8 (12%) covariates across time points, corresponding to 1 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.28 (range= 0.28-0.28):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using cbps and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          1|            0|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          3|            1|  4|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          3|            0|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and cbps :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.05 (range = -0.14 -0.28). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, the following 1 covariates across time points out of 8 total (12.5%) spanning 1 domains out of 3 (33.33%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.28 (range=0.28-0.28) :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced Covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2  |A        |        2|          1|A.1       | 0.2764999|        0.2|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"weighted"</span>,</span></span>
<span class="r-in"><span>                   weights <span class="op">=</span> <span class="va">w</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   balance_thresh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   imp_conf <span class="op">=</span> <span class="st">"B.1"</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-20.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-21.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-22.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, 1 out of 8 (12%) covariates across time points, corresponding to 1 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.28 (range= 0.28-0.28):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using cbps and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          1|            0|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          3|            1|  4|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          3|            0|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and cbps :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.05 (range = -0.14 -0.28). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, the following 1 covariates across time points out of 8 total (12.5%) spanning 1 domains out of 3 (33.33%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.28 (range=0.28-0.28) :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced Covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2  |A        |        2|          1|A.1       | 0.2764999|        0.2|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Isabella Stallworthy, Noah Greifer, Meriah DeJoseph, Emily Padrutt, Daniel Berry.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

